<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda</title>

    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;1,500&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <h1>Agendamento de despacho com o comandante</h1>
    </header>

    <main class="conteudo">
        <section class="inicio">
            <label for="login">Login:</label>
            <input type="text" id="login">
            <label for="senha">Senha:</label>
            <input type="password" id="senha">
            <div>
                <button id="btn-entrar">Entrar</button>
                <button id="btn-cadastrar">Cadastre-se</button>
            </div>
            <button class="btn-recupera-senha" href="#">Esqueci minha senha</button>
        </section>
    </main>

    <footer>
        <p>Created By 1ยบ Ten Jonathan | &#169; 2023 All Right Reserved.</p>
    </footer>

    <script src="main.js" type="module"></script>
    <script>
        function horariosDisponiveis() {
            const horarios = ["08:00", "08:15", "08:30", "08:45", "09:00", "09:15", "09:30", "09:45", "10:00"];
            const optionsHora = document.getElementById('select-hora');
            optionsHora.innerHTML= '';

            if (localStorage.agenda) {
                const agenda = JSON.parse(localStorage.getItem('agenda'));
                const dataSelecionada = document.getElementById('input-data').value;
                var filtro = agenda.filter(data => data.slice(0, 10) === dataSelecionada)
                var horarioIndisponivel = filtro.map(indisponivel => indisponivel.slice(11, 16))
                var horarioDisponivel = horarios;

                for (let i = 0; i < horarios.length; i++) {
                    for (let j = 0; j < horarioIndisponivel.length; j++) {
                        if (horarios[i] === horarioIndisponivel[j]) {
                            horarioDisponivel.splice(horarios.indexOf(horarios[i]), 1)
                        }
                    }
                }
                console.log(horarioDisponivel);

                for (let i in horarioDisponivel) {
                    optionsHora.innerHTML += 
                    `
                    <option>${horarioDisponivel[i]}</option>;
                    `
                }
            } else {
                for (let i in horarioDisponivel) {
                    optionsHora.innerHTML += 
                    `
                    <option>${horarioDisponivel[i]}</option>;
                    `
                }
            }

        };
    </script>
</body>

</html>